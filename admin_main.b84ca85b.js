!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire0562;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequire0562=o);var a=document.querySelector(".promocode__form"),c=document.querySelector(".input-amount-js"),s=document.querySelector(".date__wrapper"),i=document.querySelector(".common-promocode"),l=document.querySelector(".personal-promocode"),u=document.querySelector("#dateStart"),d=document.querySelector("#dateTo"),p={};function m(){var e=new Date,t=e.getDate(),n=e.getMonth()+1;return n<10&&(n="0"+n),t<10&&(t="0"+t),e.getFullYear()+"-"+n+"-"+t}u.value=m(),d.value=m();var f,v,g,y,b,h;v=(f={common:[{discount:10,isUsing:null,promo:"48383627",type:"Common",period:{from:"2023-02-03T22:00:00.000Z",to:"2023-04-18T21:00:00.000Z"}},{discount:20,isUsing:null,promo:"38417820",type:"Common",period:{from:"2023-02-03T22:00:00.000Z",to:"2023-04-18T21:00:00.000Z"}}],personal:[{discount:30,isUsing:!1,type:"personal",promo:"sdvsdv",period:null},{discount:30,isUsing:!1,type:"personal",promo:"1dbfd45",period:null},{discount:10,isUsing:!1,type:"personal",promo:"v63sd1v2",period:null},{discount:30,isUsing:!1,type:"personal",promo:"sdv2fd1",period:null},{discount:20,isUsing:!1,type:"personal",promo:"dfvzx",period:null},{discount:20,isUsing:!1,type:"personal",promo:"137dsv5df",period:null}]}).common,g=f.personal,y=v.map((function(e,t){var n=e.discount,r=e.promo,o=e.period;return'<li class="list__item" data-name=\''.concat(r,"'>\n            <p>Знижка ").concat(n,"%</p>\n            <p>Термін дії: ").concat(o.from.slice(0,10)," - ").concat(o.to.slice(0,10),'</p>\n            <div class="common__wrapper">\n            <p>').concat(t+1,'. <span class="promo__name">').concat(r,'</span></p>\n            <button data-action="delete" class="btn btn-danger" type="button">Видалити</button>\n            </div>\n            </li>')})).join(""),b=g.reduce((function(e,t){return e[t.discount]=e[t.discount]||[],e[t.discount].push(t),e}),{}),h=Object.entries(b).map((function(e){return"\n        <p>Знижка ".concat(e[0],'%</p>\n        <ul class="list__item">\n          ').concat(e[1].map((function(e,t){return'\n                    <li class="personal__wrapper" data-name=\''.concat(e.promo,"'>\n                    <span>").concat(t+1,'. \n                      <span class="promo__name">').concat(e.promo,'</span>\n                    </span>\n                    <div class="btn-wrapper">\n                    <button data-action="active" class="btn btn-success" type="button">Активувати</button>\n                    <button data-action="delete" class="btn btn-danger" type="button">Видалити</button></div>\n                    </li>')})).join(""),"</ul>")})).join(""),i.innerHTML=y,l.innerHTML=h,a.addEventListener("change",(function(e){e.preventDefault(),"personal"===e.currentTarget.elements.promocode.value?(c.disabled&&(c.disabled=!1),s.classList.add("visually-hidden")):(s.classList.contains("visually-hidden")&&s.classList.remove("visually-hidden"),c.disabled=!0)})),a.addEventListener("submit",(function(e){e.preventDefault();var t=e.currentTarget,n=t.elements,r=n.promocode,o=n.amound,a=n.discount,i=n.dateStart,l=n.dateTo;"personal"===r.value?(p.type=r.value,p.amound=o.value,p.discount=a.value,p.period=null):(p.type=r.value,p.discount=a.value,p.discount=o.value,p.period={from:i.value,to:l.value}),console.log(p),c.disabled&&(c.disabled=!1),s.classList.contains("visually-hidden")&&s.classList.remove("visually-hidden"),t.reset(),u.value=m(),d.value=m()})),i.addEventListener("click",(function(e){if("BUTTON"===e.target.nodeName){var t=e.target.closest("li").dataset.name;confirm("Дійсно видалити цей промокод: ".concat(t," ?"))?console.log("delete ".concat(t)):console.log("do not delete ".concat(t))}})),l.addEventListener("click",(function(e){if("BUTTON"===e.target.nodeName){var t=e.target.dataset.action,n=e.target.closest("li").dataset.name;if("delete"===t)confirm("Дійсно видалити цей промокод: ".concat(n," ?"))?console.log("delete ".concat(n)):console.log("do not delete ".concat(n));else confirm("Дійсно активувати цей промокод: ".concat(n," ?"))?(console.log("active ".concat(n)),e.target.disabled=!0,e.target.innerText="Активовано"):console.log("do not active ".concat(n))}}));var x,T=o("bpxeT"),w=o("2TvXO"),L=o("dIxxU"),_=document.querySelector(".order-admin"),k=document.querySelector('[data-status="to-order"]'),q=document.querySelector('[data-status="pre-order"]'),S=document.querySelector(".form-to-order"),U=document.querySelector(".form-pre-order"),O=function(e){console.log(e),"pre-order"===e.type?document.querySelector(".preorder-price-info").innerHTML="Встановлена ціна: ".concat(e.data.price,", ціна зі знижкою:  ").concat(e.data.preOrderPrice):document.querySelector(".price-info").innerHTML="Встановлена ціна: ".concat(e.data.price)},E=(x=e(T)(e(w).mark((function t(n){var r;return e(w).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.classList.remove("btn-danger"),n.classList.add("btn-success"),n.innerText="Активовано",n.disabled=!0,e.next=6,L.default.get("https://flexyplanner.onrender.com/markup");case 6:r=e.sent.data,O(r);case 8:case"end":return e.stop()}}),t)}))),function(e){return x.apply(this,arguments)}),D=function(){var t=e(T)(e(w).mark((function t(n,r){return e(w).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.default.patch("https://flexyplanner.onrender.com/markup");case 2:E(n),r.classList.remove("btn-success"),r.classList.add("btn-danger"),r.innerText="Активувати",r.disabled=!1;case 7:case"end":return e.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),M=function(){var t=e(T)(e(w).mark((function t(n){var r;return e(w).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={type:"to-order",data:{price:n.target.elements.price.value}},e.prev=2,e.next=5,L.default.put("https://flexyplanner.onrender.com/markup",r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=e(T)(e(w).mark((function t(n){var r;return e(w).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={type:"pre-order",data:{price:n.target.elements.price.value,preOrderPrice:n.target.elements.preOrderPrice.value}},e.prev=2,e.next=5,L.default.put("https://flexyplanner.onrender.com/markup",r);case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();function N(){return(N=e(T)(e(w).mark((function t(){return e(w).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.default.get("https://flexyplanner.onrender.com/markup");case 3:"pre-order"===e.sent.data.type?E(q):E(k),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("something went wrong");case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}_.addEventListener("click",(function(e){e.target.classList.contains("btn-order-js")&&("pre-order"==e.target.dataset.status?D(e.target,k):D(e.target,q))})),S.addEventListener("submit",M),U.addEventListener("submit",j),function(){N.apply(this,arguments)}()}();
//# sourceMappingURL=admin_main.b84ca85b.js.map
