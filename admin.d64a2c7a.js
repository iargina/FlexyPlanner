const e=document.querySelector(".promocode__form"),t=document.querySelector(".input-amount-js"),n=document.querySelector(".date__wrapper"),o=document.querySelector(".common-promocode"),s=document.querySelector(".personal-promocode"),a=document.querySelector("#dateStart"),r=document.querySelector("#dateTo"),d={};function l(){const e=new Date;let t=e.getDate(),n=e.getMonth()+1;n<10&&(n="0"+n),t<10&&(t="0"+t);return e.getFullYear()+"-"+n+"-"+t}a.value=l(),r.value=l();!function({common:e,personal:t}){const n=e.map((({discount:e,promo:t,period:n},o)=>`<li class="list__item" data-name='${t}'>\n            <p>Знижка ${e}%</p>\n            <p>Термін дії: ${n.from.slice(0,10)} - ${n.to.slice(0,10)}</p>\n            <div class="common__wrapper">\n            <p>${o+1}. <span class="promo__name">${t}</span></p>\n            <button data-action="delete" class="btn btn-danger" type="button">Видалити</button>\n            </div>\n            </li>`)).join(""),a=t.reduce(((e,t)=>(e[t.discount]=e[t.discount]||[],e[t.discount].push(t),e)),{}),r=Object.entries(a).map((e=>`\n        <p>Знижка ${e[0]}%</p>\n        <ul class="list__item">\n          ${e[1].map(((e,t)=>`\n                    <li class="personal__wrapper" data-name='${e.promo}'>\n                    <span>${t+1}. \n                      <span class="promo__name">${e.promo}</span>\n                    </span>\n                    <div class="btn-wrapper">\n                    <button data-action="active" class="btn btn-success" type="button">Активувати</button>\n                    <button data-action="delete" class="btn btn-danger" type="button">Видалити</button></div>\n                    </li>`)).join("")}</ul>`)).join("");o.innerHTML=n,s.innerHTML=r}({common:[{discount:10,isUsing:null,promo:"48383627",type:"Common",period:{from:"2023-02-03T22:00:00.000Z",to:"2023-04-18T21:00:00.000Z"}},{discount:20,isUsing:null,promo:"38417820",type:"Common",period:{from:"2023-02-03T22:00:00.000Z",to:"2023-04-18T21:00:00.000Z"}}],personal:[{discount:30,isUsing:!1,type:"personal",promo:"sdvsdv",period:null},{discount:30,isUsing:!1,type:"personal",promo:"1dbfd45",period:null},{discount:10,isUsing:!1,type:"personal",promo:"v63sd1v2",period:null},{discount:30,isUsing:!1,type:"personal",promo:"sdv2fd1",period:null},{discount:20,isUsing:!1,type:"personal",promo:"dfvzx",period:null},{discount:20,isUsing:!1,type:"personal",promo:"137dsv5df",period:null}]}),e.addEventListener("change",(function(e){e.preventDefault(),"personal"===e.currentTarget.elements.promocode.value?(t.disabled&&(t.disabled=!1),n.classList.add("visually-hidden")):(n.classList.contains("visually-hidden")&&n.classList.remove("visually-hidden"),t.disabled=!0)})),e.addEventListener("submit",(function(e){e.preventDefault();const o=e.currentTarget,{elements:{promocode:s,amound:i,discount:c,dateStart:u,dateTo:p}}=o;"personal"===s.value?(d.type=s.value,d.amound=i.value,d.discount=c.value,d.period=null):(d.type=s.value,d.discount=c.value,d.discount=i.value,d.period={from:u.value,to:p.value}),console.log(d),t.disabled&&(t.disabled=!1),n.classList.contains("visually-hidden")&&n.classList.remove("visually-hidden"),o.reset(),a.value=l(),r.value=l()})),o.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;const t=e.target.closest("li").dataset.name;confirm(`Дійсно видалити цей промокод: ${t} ?`)?console.log(`delete ${t}`):console.log(`do not delete ${t}`)})),s.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;const t=e.target.dataset.action,n=e.target.closest("li").dataset.name;if("delete"===t){confirm(`Дійсно видалити цей промокод: ${n} ?`)?console.log(`delete ${n}`):console.log(`do not delete ${n}`)}else{confirm(`Дійсно активувати цей промокод: ${n} ?`)?(console.log(`active ${n}`),e.target.disabled=!0,e.target.innerText="Активовано"):console.log(`do not active ${n}`)}}));const i=document.querySelector(".order-admin"),c=document.querySelector('[data-status="to-order"]'),u=document.querySelector('[data-status="pre-order"]'),p=document.querySelector(".form-to-order"),m=document.querySelector(".form-pre-order"),v=(e,t)=>{e.classList.remove("btn-danger"),e.classList.add("btn-success"),e.innerText="Активовано",t.classList.remove("btn-success"),t.classList.add("btn-danger"),t.innerText="Активувати"};i.addEventListener("click",(e=>{e.target.classList.contains("btn-order-js")&&("pre-order"==e.target.dataset.status?v(e.target,c):v(e.target,u))})),p.addEventListener("submit",(e=>{e.preventDefault();new FormData(p)})),m.addEventListener("submit",(e=>{e.preventDefault();new FormData(m)}));
//# sourceMappingURL=admin.d64a2c7a.js.map
