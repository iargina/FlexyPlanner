const e=document.querySelector(".promocode__form"),o=document.querySelector(".input-amount-js"),n=document.querySelector(".date__wrapper"),t=document.querySelector(".common-promocode"),s=document.querySelector(".personal-promocode"),a=document.querySelector("#dateStart"),l=document.querySelector("#dateTo"),i={};function d(){const e=new Date;let o=e.getDate(),n=e.getMonth()+1;n<10&&(n="0"+n),o<10&&(o="0"+o);return e.getFullYear()+"-"+n+"-"+o}a.value=d(),l.value=d();!function({common:e,personal:o}){const n=e.map((({discount:e,promo:o,period:n},t)=>`<li class="list__item" data-name='${o}'>\n            <p>Знижка ${e}%</p>\n            <p>Термін дії: ${n.from.slice(0,10)} - ${n.to.slice(0,10)}</p>\n            <div class="common__wrapper">\n            <p>${t+1}. <span class="promo__name">${o}</span></p>\n            <button data-action="delete" class="btn btn-danger" type="button">Видалити</button>\n            </div>\n            </li>`)).join(""),a=o.reduce(((e,o)=>(e[o.discount]=e[o.discount]||[],e[o.discount].push(o),e)),{}),l=Object.entries(a).map((e=>`\n        <p>Знижка ${e[0]}%</p>\n        <ul class="list__item">\n          ${e[1].map(((e,o)=>`\n                    <li class="personal__wrapper" data-name='${e.promo}'>\n                    <span>${o+1}. \n                      <span class="promo__name">${e.promo}</span>\n                    </span>\n                    <div class="btn-wrapper">\n                    <button data-action="active" class="btn btn-success" type="button">Активувати</button>\n                    <button data-action="delete" class="btn btn-danger" type="button">Видалити</button></div>\n                    </li>`)).join("")}</ul>`)).join("");t.innerHTML=n,s.innerHTML=l}({common:[{discount:10,isUsing:null,promo:"48383627",type:"Common",period:{from:"2023-02-03T22:00:00.000Z",to:"2023-04-18T21:00:00.000Z"}},{discount:20,isUsing:null,promo:"38417820",type:"Common",period:{from:"2023-02-03T22:00:00.000Z",to:"2023-04-18T21:00:00.000Z"}}],personal:[{discount:30,isUsing:!1,type:"personal",promo:"sdvsdv",period:null},{discount:30,isUsing:!1,type:"personal",promo:"1dbfd45",period:null},{discount:10,isUsing:!1,type:"personal",promo:"v63sd1v2",period:null},{discount:30,isUsing:!1,type:"personal",promo:"sdv2fd1",period:null},{discount:20,isUsing:!1,type:"personal",promo:"dfvzx",period:null},{discount:20,isUsing:!1,type:"personal",promo:"137dsv5df",period:null}]}),e.addEventListener("change",(function(e){e.preventDefault(),"personal"===e.currentTarget.elements.promocode.value?(o.disabled&&(o.disabled=!1),n.classList.add("visually-hidden")):(n.classList.contains("visually-hidden")&&n.classList.remove("visually-hidden"),o.disabled=!0)})),e.addEventListener("submit",(function(e){e.preventDefault();const t=e.currentTarget,{elements:{promocode:s,amound:r,discount:c,dateStart:u,dateTo:p}}=t;"personal"===s.value?(i.type=s.value,i.amound=r.value,i.discount=c.value,i.period=null):(i.type=s.value,i.discount=c.value,i.discount=r.value,i.period={from:u.value,to:p.value}),console.log(i),o.disabled&&(o.disabled=!1),n.classList.contains("visually-hidden")&&n.classList.remove("visually-hidden"),t.reset(),a.value=d(),l.value=d()})),t.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;const o=e.target.closest("li").dataset.name;confirm(`Дійсно видалити цей промокод: ${o} ?`)?console.log(`delete ${o}`):console.log(`do not delete ${o}`)})),s.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;const o=e.target.dataset.action,n=e.target.closest("li").dataset.name;if("delete"===o){confirm(`Дійсно видалити цей промокод: ${n} ?`)?console.log(`delete ${n}`):console.log(`do not delete ${n}`)}else{confirm(`Дійсно активувати цей промокод: ${n} ?`)?(console.log(`active ${n}`),e.target.disabled=!0,e.target.innerText="Активовано"):console.log(`do not active ${n}`)}}));
//# sourceMappingURL=admin_main.cd795ba7.js.map
